<!DOCTYPE html>
<html>
<head>
  <title>Sweet Music</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>Sweet Music Library</h1>
  <form method="GET" action="/">
    <input type="text" name="q" placeholder="Search by title or artist">
    <button type="submit">Search</button>
  </form>
  <a href="/upload">Upload new track</a>
  <hr>
  <% if (tracks.length === 0) { %>
    <p>No tracks uploaded yet.</p>
  <% } else { %>
    <% tracks.forEach(track => { %>
      <div class="track">
        <h2><%= track.title %> by <%= track.artist %></h2>
        <% if (track.cover) { %><img src="<%= track.cover %>" alt="cover"><% } %>
        <audio controls onplay="fetch('/play/<%= track.id %>', { method: 'POST' })">
          <source src="<%= track.music %>" type="audio/mpeg">
        </audio>
        <p><strong>Plays:</strong> <%= track.plays %></p>
      </div>
    <% }) %>
  <% } %>
</body>
</html>
